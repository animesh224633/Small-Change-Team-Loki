<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.smallchange.integration.mapper.SmallChangeWalletMapper">

	<select id="getSmallChangeWalletAmount" resultMap="SmallChangeWalletDetails">
		select CLIENT_SMALLCHANGE_WALLET   from client where CLIENT_ID =#{clientId}
	</select>

	<resultMap type="SmallChangeWalletAmount" id="SmallChangeWalletDetails">
		<result property="clientSmallChangeWallet"	 column="CLIENT_SMALLCHANGE_WALLET" />
	</resultMap>
    
    <select id="getBankAccountDetails" resultMap="AccountsMap">
		select ACCOUNT_NUMBER, ACCOUNT_BALANCE from CLIENT_FINANCE_DETAILS where client_id=#{clientId}
	</select>

	<resultMap type="BankAccountDetails" id="AccountsMap">
		<result property="accountName"			column="ACCOUNT_NUMBER" />
		<result property="accountBalance"		column="ACCOUNT_BALANCE" />
	</resultMap>
	
	<update id="updateClientTable">
	  	update client set
	    client_smallchange_wallet = #{updatedWalletAmount}
	  	where client_id = #{clientId}
	</update>
	
	<update id="updateClientFinanceTable">
	  	update client_finance_details set
	    account_balance = #{updatedAccountValue}
	  	where client_id = #{clientId} and account_number = #{accountName}
	</update>

	
</mapper>